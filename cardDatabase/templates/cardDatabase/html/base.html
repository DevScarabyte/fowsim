<!DOCTYPE html>
{% load static card_database_tags %}
{% block html %}
    <html lang="en">
        <head>
            {% block head %}
                <meta charset="UTF-8">
                <title>{% block title %}FoW Simulator{% block subtitle %} - Database{% endblock %}{% endblock %}</title>
                {% block js %}
                    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                            crossorigin="anonymous"></script>
                    <script src="{% static 'js/bootstrap/bootstrap.js' %}" type="text/javascript"></script>
                    <script src="{% static 'js/bootstrap/mdb.js' %}" type="text/javascript"></script>
                    <script src="{% static 'js/base.js' %}" type="text/javascript"></script>
                {% endblock %}
                {% block css %}
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
                          integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
                    <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.css' %}">
                    <link rel="stylesheet" href="{% static 'css/bootstrap/mdb.css' %}">
                    <link rel="stylesheet" href="{% static 'css/base.css' %}">
                {% endblock %}
            {% endblock %}
        </head>
        <body>
            {% block header %}
                <div id="header">
                    <div class="header-content">
                        <a href="{% url 'cardDatabase-search' %}">
                            <div id="site-title">{% block header-title %}Force of Wind{% endblock %}</div>
                            <img id="site-icon" src="{% static 'imgs/wind.png'%}">
                        </a>
                    </div>
                    <div id="social-media">
                        <a href="https://discord.com/invite/8S5XW6pUEF" target="_blank">
                            <img class="discord" src="{% static 'imgs/discord.png' %}">
                        </a>
                    </div>
                </div>
            {% endblock %}
            {% block body %}
                {% block search_form %}
                    <div id="search-toggles" class="basic-showing no-select">
                        <div id="basic-search-toggle" class="search-toggle">Basic Search</div>
                        <div id="advanced-search-toggle" class="search-toggle">Advanced Search</div>
                    </div>
                    <div id="basic-search">
                        <form id="basic-form" method="post" action="{% url 'cardDatabase-search' %}">
                            {% csrf_token %}
                            {{ basic_form }}
                            <input type="submit" value="Search" name="basic-form">
                        </form>
                    </div>
                    <div id="advanced-search">
                        <form id="advanced-form" method="post" action="{% url 'cardDatabase-search' %}">
                            {% csrf_token %}
                            {{ advanced_form.non_field_errors }}
                            <div class="fieldWrapper">
                                {{ advanced_form.generic_text }}
                            </div>
                            <div class="fieldWrapper">
                                {{ advanced_form.text_search_fields.errors }}
                                {% for value, display in advanced_form.text_search_fields.field.choices %}
                                    <label for="id_text_search_fields_{{ forloop.counter0 }}">
                                        <input type="checkbox" name="text_search_fields" id="id_text_search_fields_{{ forloop.counter0 }}"
                                               value="{{ value }}">
                                        {{ display }}
                                    </label>
                                {% endfor %}
                            </div>
                            <div class="fieldWrapper">
                                {{ advanced_form.colours.errors }}
                                {% for value, display in advanced_form.colours.field.choices %}
                                    <label for="id_colours_{{ forloop.counter0 }}">
                                        {% attribute_to_img_html value %}
                                        <input type="checkbox" class="fow-checkbox" name="colours" id="id_colours_{{ forloop.counter0 }}"
                                               value="{{ value }}">
                                    </label>
                                {% endfor %}
                            </div>
                            <div class="fieldWrapper sets-select">
                                <select class="mdb-select md-form" multiple form="advanced-form">
                                    {% for cluster in sets_json.clusters reversed %}
                                        <optgroup label="{{ cluster.name }} Cluster">
                                            {% for set in cluster.sets reversed %}
                                                <option value="{{ set.code }}">{{ set.name }}</option>
                                            {% endfor %}
                                        </optgroup>
                                    {% endfor %}
                                </select>
                            </div>
                            <input type="submit" value="Search" name="advanced-form">
                        </form>
                    </div>
                {% endblock %}
            {% endblock %}
        </body>
    </html>
{% endblock %}